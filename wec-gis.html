<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <title>Using R as a GIS</title>
        <meta name="author" content="(Matthew Haffner)"/>
        <style type="text/css">
         .underline { text-decoration: underline; }
        </style>
        <link rel="stylesheet" href="./css/reveal.css"/>
        <link rel="stylesheet" href="./css/theme/black.css" id="theme"/>
        <link rel="stylesheet" href="./css/theme/wec.css" id="wec"/>
        <link rel="stylesheet" href="./css/code/monokai-sublime.css"/>
    </head>

    <body>
        <div class="reveal">
            <div class="slides">

<!-- Title slide -->
                <section data-background="./images/lbsm-giscience/detroit-filter.png">
                    <h2>Using R as a GIS</h2>
                    <p>
                        Matthew Haffner <br />
                        Department of Geography <br />
                        Oklahoma State University
                    </p>
                    <div class="slide-footer">Using R as a GIS</div>
                </section>
                <section>
                    <h2>
                        Overview
                    </h2>
                    <ol>
                        <li class="fragment appear">Introduction to R</li>
                        <li class="fragment appear">Demonstration of R as a GIS</li>
                        <li class="fragment appear">Spatial Autocorrelation</li>
                        <li class="fragment appear">Interactive Exercises</li>
                    </ol>
                    <div class="slide-footer">Using R as a GIS</div>
                </section>
  <!-- slide -->
                <section>
                    <h2>The R language</h2>
                    <div style="width:50%; float:left;">
                        <p>Variable Declaration (<-)</p>
                        <pre>
                            <code style="font-size:80%;" data-noescape>

x <- 1
y <- 2
z <- x + y
                            </code>
                        </pre>
                    </div>
                    <div style="width:50%; float:left;">
                        <p>Variable Declaration (=)</p>
                        <pre>
                            <code style="font-size:80%;" data-noescape>

x = 1
y = 2
z = x + y
                            </code>
                        </pre>
                    </div>
                    <div class="slide-footer">Introduction to R</div>
                </section>
  <!-- slide -->
                <section>
                    <h2>The R language</h2>
                    <p>Libraries and Data</p>
                    <pre>
                        <code style="font-size:80%;" data-noescape>
install.packages('GISTools')
library(GISTools)
library(OpenStreetMap)
library(rgdal)

data(tornados)
data(newhaven)
data(georgia)
data(mtcars)
                        </code>
                    </pre>
                    <div class="slide-footer">Introduction to R</div>
                </section>
  <!-- slide -->
                <section>
                    <h2>The R language</h2>
                    <p>Plotting</p>
                    <pre>
                        <code style="font-size:80%;" data-noescape>
hist(tornadoes)
hist(wisconsin.tornadoes)

plot(wisconsin)
plot(wisconsin.tonadoes, add = TRUE)
                        </code>
                    </pre>
                    <div class="slide-footer">Introduction to R</div>
                </section>
  <!-- slide -->
                <section>
                    <h2>The R language</h2>
                    <p>Comments</p>
                    <pre>
                        <code style="font-size:80%;" data-noescape>
#anything following a '#' will not be executed
#find tornadoes inside and within 25km of Wisconsin
wisconsin_buf <- gBuffer(wisconsin, wisconsindth = 25000)
wisconsin_buf_torn <- gIntersection(wisconsin_buf, torn2) # comment
plot(wisconsin_buf) # comment
plot(wisconsin_plus_buf_torn, add = TRUE)
plot(wisconsin, add = TRUE)
                        </code>
                    </pre>
                    <div class="slide-footer">Introduction to R</div>
                </section>
  <!-- slide -->
                <section>
                    <h2>The R language</h2>
                    <p>Functions</p>
                    <div style="width:50%; float:left;">
                        <p>Simple example</p>
                        <pre>
                            <code style="font-size:80%;" data-noescape>
fn <- function(arg1, arg2) {
  arg1 * arg2
}
                            </code>
                        </pre>
                        <pre>
                            <code style="font-size:80%;" data-noescape>
> fn(6, 7)
[1] 42
>
                            </code>
                        </pre>
                    </div>
                    <div style="width:50%; float:left;">
                        <p>Practical example</p>
                        <pre>
                            <code style="font-size:80%;" data-noescape>
library(GISTools)

merged <- gUnion(wisconsin_counties, minnesota_counties)

                            </code>
                        </pre>
                    </div>
                    <div class="slide-footer">Introduction to R</div>
                </section>
  <!-- slide -->
                <section>
                    <h2>How R Can Be Used As a GIS</h2>
                    <div class="slide-footer">Demonstration of R as a GIS</div>
                </section>
  <!-- slide -->
                <section>
                    <h2>Why R?</h2>
                    <ul>
                        <li class="fragment appear">Efficiency - avoid manual labor!</li>
                        <li class="fragment appear">Reproducibility</li>
                        <li class="fragment appear">Freedom/openness</li>
                    </ul>
                    <div class="slide-footer">Introduction to R</div>
                </section>
  <!-- slide -->
                <section>
                    <p>
                        Plot 20-30 points in a random spatial pattern
                    </p>
                    <div class="slide-footer">Spatial autocorrelation</div>
                </section>
  <!-- slide -->
                <section>
                    <h2>Spatial Autocorrelation</h2>
                    <div class="fragment appear" style="width:50%; float:left;">
                        <p>Points</p>
                        <img src="./images/wec-gis/wi-torn.png" height="500px" />
                    </div>
                    <div class="fragment appear" style="width:50%; float:left;">
                        <p>Polygons</p>
                        <img src="./images/wec-gis/wi-tornado.jpg" height="500px" />
                    </div>
                    <div class="slide-footer">Spatial autocorrelation</div>
                </section>
  <!-- slide -->
                <section>
                    <h2>Spatial Autocorrelation</h2>
                    <p>
                        <img src="./images/wec-gis/sac-2.jpg" height="400px" />
                    </p>
                    <p class="web-source">
                        Source: http://rfunctions.blogspot.com/2017/06/how-to-identify-and-remove-spatial.html
                    </p>
                    <div class="slide-footer">Spatial autocorrelation</div>
                </section>
  <!-- slide -->
                <section>
                    <h2>Temporal Autocorrelation</h2>
                    <div class="slide-footer">Spatial autocorrelation</div>
                </section>
  <!-- slide -->
                <section>
                    <h2>Spatial Autocorrelation</h2>
                    <p><img src="./images/wec-gis/sac-1.gif" height="150px" /></p>
                    <p class="web-source">Source: http://pro.arcgis.com/en/pro-app/tool-reference/spatial-statistics/GUID-5CCEE7E5-839C-46E8-A88B-FCD02F07B209-web.gif</p>
                    <div class="slide-footer">Spatial autocorrelation</div>
                </section>
  <!-- slide -->
                <section>
                    <div style="width:50%; float:left;">
                        <p><img src="./images/wec-gis/wi-tornado.jpg" height="700px"></p>
                    </div>
                    <div style="width:50%; float:left;">
                        <p><img src="./images/wec-gis/wi-flood.jpg" height="700px"/></p>
                    </div>
                    <div class="slide-footer">Spatial autocorrelation</div>
                </section>
  <!-- slide -->
                <section>
                    <div style="width:50%; float:left;">
                        <p><img src="./images/wec-gis/wi-tornado.jpg" height="700px"></p>
                    </div>
                    <div style="width:50%; float:left;">
                        <p><img src="./images/wec-gis/wi-hail.jpg" height="700px"/></p>
                    </div>
                    <div class="slide-footer">Spatial autocorrelation</div>
                </section>
  <!-- slide -->
                <section>
                    <h2>Visually Identifying Spatial Autocorrelation</h2>
                    <ul style="font-size: 80%;">
                        <li>Visit <a href="http://geo-haffner.com">http://geo-haffner.com</a> in a web browser</li>
                        <li>Example login:
                        <ul>
                            <li>Username:</li>
                            <li>Password: wec-gis</li>
                        </ul>
                            <li>Open the file "wec-gis/scripts/random-maps.R"</li>
                            <li>Use the "Run" button to execute each line individually</li>
                            <li>Once you get to the bottom of the file, maps should generate automatically</li>
                            <li>Type "real.data" in the console to see which map holds the actual data</li>
                            <li>Put the cursor on line 40 to run the code again</li>
                            <li>On line 40, replace "Flood" and "Purples" with other options</li>
                    </ul>
                    <div class="slide-footer">Spatial autocorrelation</div>
                </section>
  <!-- slide -->
                <section>
                    <h2>Spatial Autocorrelation</h2>
                    <p><img src="./images/wec-gis/sac-1.gif" height="150px" /></p>
                    <p class="fragment appear"> -1 < Moran's Index of Spatial Autocorrelation < 1</p>
                    <div class="slide-footer">Spatial autocorrelation</div>
                </section>
  <!-- slide -->
                <section>
                    <h2>Who is my neighbor?</h2>
                    <div class="slide-footer">Spatial autocorrelation</div>
                </section>
  <!-- slide -->
                <section>
                    <h2>Iterative Approach to Moran's <i>I</i></h2>
                    <div class="slide-footer">Spatial autocorrelation</div>
                </section>
  <!-- slide -->
                <section>
                    <section>
                        <h2>Extensions To This Analysis</h2>
                        <ul>
                            <li class="fragment appear">Are the spatial patterns of earthquakes in Oklahoma
                                clustered, dispersed or random?</li>
                            <li class="fragment appear">Is there are relationship between deaths in tornaoes/floods to income and race?</li>
                        </ul>
                    <div class="slide-footer">Spatial autocorrelation</div>
                    </section>
   <!-- slide -->
                    <section>
                        <h2>Limitations Of This Approach</h2>
                        <ul>
                            <li class="fragment appear">Edge effects</li>
                            <li class="fragment appear">Disproportionately sized counties</li>
                            <li class="fragment appear">Data disconnect - polygon area vs. land area</li>
                            <li class="fragment appear">The map is not projected</li>
                        </ul>
                    <div class="slide-footer">Spatial autocorrelation</div>
                    </section>
                </section>
  <!-- slide -->
                <section>
                    <h2>What is a GIS?</h2>
                    <p class="fragment appear">"A geographic information system (GIS) lets us visualize,
                    question, analyze, and interpret data to understand
                    relationships, patterns, and trends." -ESRI</p>
                        <div class="slide-footer">Using R as a GIS</div>
                </section>
  <!-- slide -->
                <section>
                    <h2>What is GIScience?</h2>
                    <p class="fragment appear">" Geographic information science
                    applies the concepts of information systems science,
                    geography, geodesy, cognitive science, mathematics, physics,
                    computer science, psychology, ethics, and related sciences
                    to design tools and techniques for analyzing, displaying,
                    visualizing, and communicating information about places,
                    events, activities, and phenomena on or near the surface of
                    the Earth." -Oregon State University</p>
                    <div class="slide-footer">Using R as a GIS</div>
                </section>
  <!-- slide -->
                <section data-background="./images/lbsm-giscience/detroit-filter.png">
                    <h2>Using R as a GIS</h2>
                    <p>
                        <img src="./images/wec-gis/qr-code.jpg" alt="qr-code.jpg" /> <br />
                        <a href="https://github.com/mhaffner/wec-gis">https://github.com/mhaffner/wec-gis</a>
                    </p>
                    <div class="slide-footer">Using R as a GIS</div>
                </section>
   <!-- END OF PRESENTATION -->
                <script src="./lib/js/head.min.js"></script>
                <script src="./js/reveal.js"></script>
                <script>
			           // More info https://github.com/hakimel/reveal.js#configuration
			           Reveal.initialize({
                     width: 1200,
                     height: 800,
				             controls: true,
				             progress: true,
				             history: true,
				             center: true,
                     touch: true,
                     slideNumber: true,
				             transition: 'none', // none/fade/slide/convex/concave/zoom
                     transitionSpeed: 'fast',
				             // More info https://github.com/hakimel/reveal.js#dependencies
	                  math: {
		                mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
		                config: 'TeX-AMS_HTML-full'  // See http://docs.mathjax.org/en/latest/config-files.html
	                  },
                     dependencies: [
					               { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					               { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					               { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					               { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					               { src: 'plugin/zoom-js/zoom.js', async: true },
					               { src: 'plugin/notes/notes.js', async: true },
		                     { src: 'plugin/math/math.js', async: true }
				             ]
			           });
                 Reveal.configure({
                     keyboard: {
                         34: 'right',
                         33: 'left',
                     }
                 });
                </script>
	              <script>
	                  var link = document.createElement( 'link' );
	                  link.rel = 'stylesheet';
	                  link.type = 'text/css';
	                  link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
	                  document.getElementsByTagName( 'head' )[0].appendChild( link );
	              </script
    </body>
</html>
